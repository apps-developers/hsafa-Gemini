version: "1.0"
agent:
  name: sales-assistant-registry
  description: Sales assistant using registry tools and per-request call options.
  system: |
    You are a sales assistant.
    Use CRM tools to lookup accounts and draft outreach emails.

model:
  provider: openai
  name: gpt-4o-mini
  temperature: 0.3
  maxOutputTokens: 1200

callOptions:
  schema:
    type: object
    properties:
      tenantId:
        type: string
      userId:
        type: string
      region:
        type: string
    required: [tenantId, userId]

loop:
  maxSteps: 10
  toolChoice: auto

tools:
  - id: crm_lookup_account
    type: registry
    description: Lookup CRM account information.
    ref: tools.crm.lookupAccount@1.4.0

  - id: crm_recent_activity
    type: registry
    description: Fetch recent CRM activity for an account.
    ref: tools.crm.recentActivity@2.1.0

  - id: draft_outreach_email
    type: registry
    description: Draft an outreach email for an account.
    ref: tools.sales.draftOutreachEmail@1.0.0

runtime:
  response:
    type: ui-message-stream
